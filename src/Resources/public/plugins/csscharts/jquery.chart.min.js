!function(t){t.fn.extend({cssCharts:function(n){var e={}
return n=t.extend(e,n),this.each(function(){"bar"==n.type?a.bar(this):"line"==n.type?a.line(this):"donut"==n.type?a.donut(this):"pie"==n.type?a.pie(this):t(this).parent().hide()})}})
var a={pie:function(a){var n=function(a,n,e,r,s,d){var o=t(document.createElementNS("http://www.w3.org/2000/svg",a)),p=t(document.createElementNS("http://www.w3.org/2000/svg","g")),h=t("<li><i></i><p></p></li>")
h.find("p").html(r+": "+e),h.find("i").css({background:d}),i.find("."+l.attr("class")).append(h)
for(var c in n)o.attr(c,n[c]).attr("data-val",e).attr("data-title",r).attr("id","path"+s).attr("class","path"),p.append(o).attr("id","pathCont"+s).attr("class","pathCont")
return p[0]},r=function(a,e){var r=[],s=[]
t.each(e,function(t,a){s.push(a[1]),r.push(a[0])}),e=s
for(var o=e.reduce(function(t,a){return a+t},0),p=e.map(function(t){return 360*t/o}),l=-90,h=-90,c=0;c<p.length;c++){l=h,h=l+p[c]
var u,f,v,g
u=parseInt(Math.round(200+195*Math.cos(Math.PI*l/180))),v=parseInt(Math.round(200+195*Math.sin(Math.PI*l/180))),f=parseInt(Math.round(200+195*Math.cos(Math.PI*h/180))),g=parseInt(Math.round(200+195*Math.sin(Math.PI*h/180)))
var m="M200,200  L"+u+","+v+"  A195,195 0 "+(h-l>180?1:0)+",1 "+f+","+g+" z",x=function(t,a){return parseInt(Math.random()*(a-t+1),10)+t},y=function(){var t
if(d)t=d[c]
else{var a=x(10,60),n=x(20,100),e=x(30,60)
t="hsl("+a+","+n+"%,"+e+"%)"}return t},w=y(),M=n("path",{d:m,fill:w},e[c],r[c],c,w)
a.prepend(M),i.prepend(a)}},i=t(a),s=t(a).attr("data-set"),d=t(a).attr("data-colors")
d&&(d=d.split(","))
var o=JSON.parse(s),p=t('<svg viewBox="0 0 400 400" class="svg"></svg>'),l=t('<ul class="pie-legend"></ul>')
i.append(l),i.parent().addClass("pie"),r(p,o)
var h={x:-1,y:-1}
!function(){var a=t('<div class="charts-tip"></div>'),n=t("body")
i.mousemove(function(e){h.x=e.pageX,h.y=e.pageY
var r=t(e.target).clone(),s=t(e.target).parent().clone(),d=i.find(".pathCont:last-child .path:last-child"),o=r.attr("data-val"),p=r.attr("data-title"),l=r.attr("fill")
o&&(a.css({left:h.x,top:h.y}),function(){n.find("."+a.attr("class")).remove(),a.html(p+": "+o),n.append(a)}(),l&&t(e.target).attr("stroke",l),function(){var t=d.attr("id"),a=r.attr("id")
t!==a&&(i.find("#"+r.attr("id")).parent().remove(),i.find(".svg").append(s))}())}),i.mouseleave(function(t){n.find("."+a.attr("class")).remove()})}()},donut:function(a){var n=t(a),e=n.attr("data-percent"),r=n.attr("data-title")
if(n.parent().addClass("donut"),r||(r="%"),e>1||0>e)return"between 0 - 1 please"
var i=180,s=360
e=parseFloat(e).toFixed(2)*s
var d=t("<div></div>").addClass("pie spinner"),o=t("<h2><p></p><span></span></h2>")
o.find("p").text(e/360*100),o.find("span").text(r),n.on("show-donut-chart",function(){o.find("p").text(0),t({countNum:o.find("p").text()}).animate({countNum:parseFloat(e/360*100).toFixed(2)},{duration:500,easing:"linear",step:function(){o.find("p").text(Math.floor(this.countNum))},complete:function(){o.find("p").text(this.countNum)}}),n.on("hide-donut-chart",function(){o.find("p").text(0)})}),n.append(o)
var p,l,h,c={nodes:{spinner:function(){return d.clone().attr("style","-webkit-transform: rotate("+c.values.spinner+"deg);-moz-transform: rotate("+c.values.spinner+"deg);transform: rotate("+c.values.spinner+"deg);")},mask:function(){return d.clone().addClass(c.values.selector).attr("style","-webkit-transform: rotate("+c.values.mask+"deg);-moz-transform: rotate("+c.values.mask+"deg);transform: rotate("+c.values.mask+"deg);")}},values:{spinner:e,mask:s,selector:""}},u=function(a){t.each(a,function(t,a){n.prepend(a())})}
i>e?(l=e,p=jQuery.extend({},c),p.values.spinner=l,p.values.selector="mask",u(p.nodes)):(h=e-i,l=e-h,h+=i,p=jQuery.extend({},c),p.values.spinner=l,p.values.mask=h,u(p.nodes))},bar:function(a){var n=t(a)
n.parent().addClass("bar")
var e=n.attr("data-bars"),r=n.attr("data-unit"),i=n.height(),s=n.attr("data-grid"),d=n.attr("data-width"),o=n.attr("data-max")
if(0===parseInt(s,10)&&n.css("background","none"),!e)return"No data to work with"
r||(r="%")
var p=function(){var t=JSON.parse("["+e+"]")
return Math.max.apply(Math,t.map(function(t){return t[0]}))};(p()>o||!o)&&(o=p()),e=JSON.parse("[["+e+"]]"),t.each(e,function(a,s){var p=t("<ul></ul>"),l=t("<li><span></span></li>").height(i)
for(a=0;a<e[0].length;a++){var h=p.clone()
t.each(s[a],function(t){var n=l.clone(),i=e[0][a][t],s=i+r,p=i/o*100
n.find("span").attr("title",s),d?n.find("span").attr("style","height:"+p+"%;width:"+d+"px"):n.find("span").attr("style","height:"+p+"%"),h.append(n)}),n.append(h)}})
var l=t("<div class='grid'></div>")
n.parent().append(l)
for(var h=0;10>=h;h++){var c=(10*h).toFixed(0),u=o/100,f=(c*u).toFixed(0)
if(h%2===0){var v=t("<hr/>").css({bottom:c+"%"}).attr("data-y",f+r)
n.parent().find(".grid").append(v)}}n.parent().width(n.width())},line:function(a){var n=function(a,n){var e=t(n).clone()
return e.find("a").attr("data-x",a.x).attr("data-y",a.y),e},e=function(a,n){var e=n.x/c.maxX*100+"%",r=n.y/u*100+"%"
n.x=n.x+"px",n.y=n.y+"px",t("ul").find(a).css("left",e),t("ul").find(a).css("bottom",r)},r=function(a,n){var e=[],r=[]
t.each(n,function(a){t.each(n[a][1],function(t,a){e.push(a)}),t.each(n[a][0],function(t,a){r.push(a)})})
var i=Math.max.apply(Math,e)+20,s=Math.max.apply(Math,r)+20
return e=i,r=a.parent().width(),a.parent().css({width:r,height:e}),a.parent().addClass("line"),{width:r,height:e,maxX:s,maxY:i}},i=function(t){var a=t.slice(0),n=a.shift(),e=0,r=0,i=null,s=[]
for(e=0;e<a.length;e++){for(i={},r=0;r<n.length;r++){var d=n[r],o=c.height-a[e][r]
d=d/c.maxX*c.width,o=o/c.maxY*c.height,i[r]={x:d,y:o}}s.push(i)}return s[0]},s=function(a,n,e,r){var s=".svgCont"
a&&(s=t('<div class="svgCont"><svg class="svg" viewBox="0 0 '+f+" "+e+'"><path class="path" d=""></path></svg></div>'),s.addClass(".p"+r),2==a&&s.addClass("fill"),d.parent().append(s))
var o=i(n,e),p=0,l=function(t,n,e){var r
if("last"==e){var i=Object.keys(t).length-1
r=" L"+t[i].x+","+t[i].x+" L0,"+t[i].x+" Z"}else{var o=Math.floor(t[n].x),p=Math.floor(t[n].y)
r=(e?"M":" ")+o+","+p}d.parent().find(s).find("path").attr("d",d.parent().find(s).find("path").attr("d")+""+r),n++,n<Object.keys(t).length&&l(t,n,!1),n==Object.keys(t).length&&2==a&&l(t,n,"last")}
l(o,p,!0)},d=t(a)
d.parent().find(".svgCont, .grid").remove(),d.parent().find(".line-chart").empty()
var o=d.attr("data-fill"),p=t("<div class='grid'></div>")
d.parent().append(p)
var l="["+d.attr("data-cord")+"]",h=d.attr("data-cord")
h=JSON.parse("["+h+"]"),2!==h[0].length&&(h=JSON.parse("["+l+"]"))
var c=r(d,h),u=c.height,f=c.width,v=function(a,r,i){for(var p=0;p<r[a].length;p++){h={x:r[0][p],y:r[1][p]}
var l=n(h,t("<li><span></span><a></a></li>"))
if(d.append(l),e(l,h),p%2===0){var c=i/10,u=t("<hr/>").css({bottom:p*c}).attr("data-y",p*c)
d.parent().find(".grid").append(u)}}s(1,r,i,a),o&&s(2,r,i,a)}
t.each(h,function(t,a){v(t,a,u)})}}}(jQuery)
